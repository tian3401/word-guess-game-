<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">

    <title>Favorite Music Hangman</title>
</head>
<body>

<!---Bootstrap grid for the body-->
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <div id="videoPlayer"><video src="../Ark.mp4" type="video/mp4" controls width="1000" height="150">
            </video></div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-2 sideCol"></div>
        <div class="col-lg-4 mainCol">
        <p>Press Any Key to Get Started</p>
        <div>Number of Wins: <span id=numberOfWins></span></div> 
        <div>Number of Remaining Guesses: <span id=guessesRemaining></span></div>
        <div>Letters Already Guessed: <span id=lettersGuessed></span></div>
        </div>

        <div class="col-lg-4 mainCol">Current Word
        <div id=secretWord></div>
        <div id=revealedWord></div></div>

        <div class="col-lg-2 sideCol"></div>
    </div>

    <div class="row">
        <div class="col-lg-12 heightIncrease">
    </div>

<script>


//Variables================================================================================ 
    var winsCounter= 0;
    var numberOfGuesses;
    var computerWordBank= ["Cranberries", "JohnLegend","CnBlue","ShipwreckAndZookeepers","Heize"];
    var computerRanNum;
    var computerGenWord;
    var computerGenWordLowCase;
    var userWrongLetters;
    var userCorrectLetters=[];
    var blanks=[];
    var k;
    var correctLetters;

//Functions===============================================================================
    
    document.querySelector("#numberOfWins").innerText= winsCounter;
    
   
    function startGame(){
        //starts the game by putting blanks for each letter of the computer generated word 
        computerRanNum= Math.floor(Math.random()*(computerWordBank.length));
        computerGenWord= computerWordBank[computerRanNum];
            console.log(computerGenWord);
        computerGenWordLowCase= computerGenWord.toLowerCase();
        correctLetters=0;
            console.log(correctLetters);
        //Sets up number of guesses
        numberOfGuesses=10;
        document.querySelector("#guessesRemaining").innerText= numberOfGuesses;
        userWrongLetters=[]
        document.querySelector("#lettersGuessed").innerText= userWrongLetters;
        blanks=[];
        document.querySelector("#secretWord").innerText= blanks.join(" ");
        for(i=0;i<computerGenWord.length;i++){
            if(correctLetters<computerGenWordLowCase.length){
            blanks.push('_ ');
            //the .join gets rid of the commas in the array by joining the indices    
            document.querySelector("#secretWord").innerText= blanks.join(" ");
            }
            //Resets the game 
            else if ((correctLetters>=computerGenWordLowCase.length)||(numberOfGuesses===0)){
                
                console.log("The else if statement works");
            }
            else{
                alert("Oh, that's not good! Matt's gonna have to fix that");
            }
        }
    }

    //The function runs based on what keys the user presses
    function userAction(){
        k=event.key; 

        if(computerGenWordLowCase.indexOf(k)===-1){
            //Updates wrong selections and puts in the wrongLetters array
            userWrongLetters.push(k);
            document.querySelector("#lettersGuessed").innerText= userWrongLetters;
            //Checks to see if the user has guessed the wrong letter before
            if(userWrongLetters.indexOf(k)===-1){
            //If wrong letter is unique run the following 
            numberOfGuesses = numberOfGuesses-1;
                if(numberOfGuesses<0){
                document.querySelector("#guessesRemaining").innerText=0;
                }
                else{
                document.querySelector("#guessesRemaining").innerText= numberOfGuesses;
                }
            
            }
            else{}
        }
        //Contains the for loop to replace the letters of the blanks
        else{
            for(j=0;j<computerGenWordLowCase.length;j++){
                if(computerGenWordLowCase[j]===k){
                blanks[j]=k;
                correctLetters++;
                document.querySelector("#secretWord").innerText= blanks.join(" ");
                    //Ensures that repeated correct letters are not stored in userCorrectLetters array
                    if(userCorrectLetters.indexOf(k)>-1){}
                    else{
                    userCorrectLetters.push(k);
                    } 
                }
            }
            //Increment wins counter 
            if(correctLetters===computerGenWordLowCase.length){
            winsCounter++; 
            document.querySelector("#numberOfWins").innerText = winsCounter;
            startGame();
            
           } 
        }
    }

    window.onload= startGame;
    document.onkeyup= userAction;
    
</script>

</div>

</body>
</html>